# База знаний

## Структура базы знаний

База знаний организована по категориям в директории `data/knowledge_base/`:

```
data/knowledge_base/
├── materials/          # Профили материалов (PLA, PETG, ABS, etc.)
├── troubleshooting/    # Решения проблем (warping, stringing, etc.)
├── printer_profiles/  # Профили принтеров (Ender 3, Prusa, etc.)
├── gcode_commands/    # Справочник G-code команд
├── calibration/       # Инструкции по калибровке
└── slicer_settings/   # Настройки слайсеров
```

## Формат документов

Все документы хранятся в формате JSON. Каждый файл содержит массив объектов:

```json
[
  {
    "id": "unique_id",
    "title": "Название документа",
    "category": "категория",
    "content": "Содержимое документа...",
    "tags": ["tag1", "tag2"],
    "language": "ru"
  }
]
```

### Поля документа:

- `id` - уникальный идентификатор
- `title` - название документа
- `category` - категория (materials, troubleshooting, etc.)
- `content` - основное содержимое (текст)
- `tags` - теги для поиска
- `language` - язык документа (ru, en, etc.)

## Добавление новых документов

1. Выберите соответствующую категорию
2. Создайте JSON файл с массивом документов
3. Используйте правильный формат
4. Загрузите в базу знаний через `scripts/ingest_knowledge.py`

## Загрузка базы знаний

```bash
python scripts/ingest_knowledge.py
```

Скрипт автоматически:
- Найдет все JSON файлы в `data/knowledge_base/`
- Разобьет на чанки (Parent Document strategy)
- Создаст embeddings
- Загрузит в ChromaDB

## Текущий объем

- Материалы: 7 документов
- Troubleshooting: 8 документов
- Профили принтеров: 5 документов
- G-code команды: 4 документа
- Калибровка: 5 документов
- Настройки слайсеров: 2 документа

**Всего: ~32 документа**

## Расширение базы

Для расширения базы знаний:

1. Добавьте новые JSON файлы в соответствующие категории
2. Используйте структурированный формат
3. Включите релевантные теги
4. Перезагрузите базу знаний

## Примеры документов

См. файлы в `data/knowledge_base/` для примеров формата.

